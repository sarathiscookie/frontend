$(function(){$(".filterCheckbox").prop("checked",!1);var e=new Bloodhound({datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.value)},queryTokenizer:Bloodhound.tokenizers.whitespace,prefetch:{url:"/",transform:function(e){return $.map(e,function(e){return{value:e.name}})}},remote:{wildcard:"%QUERY",url:"search/cabin/%QUERY",transform:function(e){return $.map(e,function(e){return{value:e.name}})}}});$("#prefetch .typeahead").typeahead({hint:!1,highlight:!0,minLength:2,limit:10},{name:"Cabins",display:"value",source:e})}),$(function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$("body").on("mousedown",".dateFrom",function(){var e=$(this).parent().parent().data("id"),t=$("#dateFrom_"+e),a=[],n=$(".holiday_"+e).data("holiday"),o=$(".green_"+e).data("green"),r=$(".orange_"+e).data("orange"),i=$(".red_"+e).data("red"),s=$(".notSeasonTime_"+e).data("notseasontime"),d="";t.datepicker({showAnim:"drop",dateFormat:"dd.mm.y",changeMonth:!0,changeYear:!0,monthNames:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthNamesShort:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],dayNamesMin:["So","Mo","Di","Mi","Do","Fr","Sa"],minDate:"+1d",yearRange:"0:+2"}),t.datepicker("option","onSelect",function(a){var n=$("#dateTo_"+e),o=t.datepicker("getDate"),r=t.datepicker("getDate");n.datepicker("setDate",r),o.setDate(o.getDate()+60),r.setDate(r.getDate()+1),n.datepicker("option","maxDate",o),n.datepicker("option","minDate",r)}),t.datepicker("option","onChangeMonthYear",function(a,l,c){void 0!=a&&void 0!=l&&(d=a+"-",d+=l+"-",d+="01"),$.ajax({url:"/calendar/ajax",dataType:"JSON",type:"POST",data:{dateFrom:d,dataId:e},success:function(e){for(var a=0;a<e.holidayDates.length;a++)n.push(e.holidayDates[a]);for(var a=0;a<e.greenDates.length;a++)o.push(e.greenDates[a]);for(var a=0;a<e.orangeDates.length;a++)r.push(e.orangeDates[a]);for(var a=0;a<e.redDates.length;a++)i.push(e.redDates[a]);for(var a=0;a<e.not_season_time.length;a++)s.push(e.not_season_time[a]);t.datepicker("refresh")}})}),t.datepicker("option","beforeShowDay",function(e){var t=jQuery.datepicker.formatDate("yy-mm-dd",e);return o.indexOf(t)>=0&&(a=[!0,"greenDates","Verfügbar"]),r.indexOf(t)>=0&&(a=[!0,"orangeDates","Begrenzt"]),i.indexOf(t)>=0&&(a=[!0,"redDates","Ausgebucht"]),s.indexOf(t)>=0&&(a=[!1,"","Geschlossen"]),n.indexOf(t)>=0&&(a=[!1,"","Ruhetag"]),a}),t.datepicker("show")}),$("body").on("mousedown",".dateTo",function(){var e=$(this).parent().parent().data("id"),t=$("#dateTo_"+e),a=[],n=$(".holiday_"+e).data("holiday"),o=$(".green_"+e).data("green"),r=$(".orange_"+e).data("orange"),i=$(".red_"+e).data("red"),s=$(".notSeasonTime_"+e).data("notseasontime"),d="";t.datepicker({showAnim:"drop",dateFormat:"dd.mm.y",changeMonth:!0,changeYear:!0,monthNames:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthNamesShort:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],dayNamesMin:["So","Mo","Di","Mi","Do","Fr","Sa"],yearRange:"0:+2"}),t.datepicker("option","onChangeMonthYear",function(a,l,c){void 0!=a&&void 0!=l&&(d=a+"-",d+=l+"-",d+="01"),$.ajax({url:"/calendar/ajax",dataType:"JSON",type:"POST",data:{dateFrom:d,dataId:e},success:function(e){for(var a=0;a<e.holidayDates.length;a++)n.push(e.holidayDates[a]);for(var a=0;a<e.greenDates.length;a++)o.push(e.greenDates[a]);for(var a=0;a<e.orangeDates.length;a++)r.push(e.orangeDates[a]);for(var a=0;a<e.redDates.length;a++)i.push(e.redDates[a]);for(var a=0;a<e.not_season_time.length;a++)s.push(e.not_season_time[a]);t.datepicker("refresh")}})}),t.datepicker("option","beforeShowDay",function(e){var t=jQuery.datepicker.formatDate("yy-mm-dd",e);return o.indexOf(t)>=0&&(a=[!0,"greenDates","Verfügbar"]),r.indexOf(t)>=0&&(a=[!0,"orangeDates","Begrenzt"]),i.indexOf(t)>=0&&(a=[!0,"redDates","Ausgebucht"]),n.indexOf(t)>=0&&(a=[!0,"holidayDates","Ruhetag"]),s.indexOf(t)>=0&&(a=[!1,"","Geschlossen"]),a}),t.datepicker("show")})}),$(function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});$(".cabinListMore").each(function(){var e=$(this).html();if(e&&e.length>375){var t=e.substr(0,375),a=e.substr(375,e.length-375),n=t+'<span class="cabinListMoreEllipses">...&nbsp;</span><span class="cabinListMoreContent"><span>'+a+"</span>&nbsp;&nbsp;</span>";$(this).html(n)}}),$("body").on("click",".addToCart",function(e){e.preventDefault();var t=$(this).parent().parent().data("cab"),a=$("#dateFrom_"+t).val(),n=$("#dateTo_"+t).val(),o=$("#beds_"+t).val(),r=$("#dorms_"+t).val(),i=$("#sleeps_"+t).val(),s=$("#sleeping_place_"+t).val(),d=$(this).val(),l="";$.ajax({url:"/add/to/cart",dataType:"JSON",type:"POST",data:{dateFrom:a,dateTo:n,beds:o,dorms:r,sleeps:i,addToCart:d,cabin:t,sleeping_place:s}}).done(function(e){if("success"===e.response){$("#errors_"+t).hide(),$("#warning_"+t).hide(),window.location.href="/cart"}}).fail(function(e,a,n,o){if(422===e.status){var r=e.responseJSON.errors;if(r)$("#warning_"+t).hide(),$("#errors_"+t).show(),l='<div class="alert alert-danger"><ul>',$.each(r,function(e,t){l+="<li>"+t+"</li>"}),l+="</ul></div>",$("#errors_"+t).html(l);else{$("#errors_"+t).hide(),$("#warning_"+t).show();var i=e.responseJSON;l='<div class="alert alert-info"><ul>',$.each(i,function(e,t){l+="<li>"+t+"</li>"}),l+="</ul></div>",$("#warning_"+t).html(l)}}})})}),$(function(){$(".toggleSeasonTime").on("click",function(){$(".seasonTimes").toggle(500)});var e=$(".more").html();if(e&&e.length>375){var t=e.substr(0,375),a=e.substr(375,e.length-375),n=t+'<span class="moreellipses">...&nbsp;</span><span class="morecontent"><span>'+a+'</span><button class="btn btn-default btn-sm btn-details morelink">Mehr anzeigen</button></span>';$(".more").html(n)}$(".morelink").click(function(){return $(this).hasClass("less")?($(this).removeClass("less"),$(this).html("Mehr anzeigen")):($(this).addClass("less"),$(this).html("Weniger anzeigen")),$(this).parent().prev().toggle(),$(this).prev().toggle(),!1}),$('[data-toggle="tooltip"]').tooltip(),$("#image-gallery").lightSlider({gallery:!0,item:1,thumbItem:9,slideMargin:0,speed:700,auto:!0,loop:!0,onSliderLoad:function(){$("#image-gallery").removeClass("cS-hidden")}})}),$(function(){function e(){var e={tax_one:window.environment.service_tax_one,tax_two:window.environment.service_tax_two,tax_three:window.environment.service_tax_three},t="",n=0;$("p.bookingDeposit").each(function(){n+=Number($(this).text().replace(/[^0-9\.-]+/g,""))});var o=n.toString(),r=o.substring(0,o.length-2)+"."+o.substring(o.length-2),i=a.format(Number(r));Number(r)<=30&&(t=e.tax_one),Number(r)>30&&Number(r)<=100&&(t=e.tax_two),Number(r)>100&&(t=e.tax_three);var s=t/100*Number(r),d=Number(r)+s;$(".replaceBookingCompleteDeposit").html(i),$(".replaceBookingServiceFee").html(t+" %"),$(".replaceBookingCompletePayment").html(a.format(d))}if($.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$(".forComments").length>0){var t=$(".forComments").map(function(){return $(this).data("cartid")}).get();$.each(t,function(e,t){$("#textarea_feedback_"+t).css("color","red"),$("#textarea_feedback_"+t).html("noch 300 Zeichen"),$("#comments_"+t).keyup(function(){var e=$("#comments_"+t).val().length,a=300-e;$("#textarea_feedback_"+t).html("noch "+a+" Zeichen")})})}var a=new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR",minimumFractionDigits:2});$(".jsBookCalSleep").change(function(){var t=$(this).parent().parent().data("cartid"),n=0,o=$(".amountBookingDays_"+t).data("amountbookingdays");""!==$(this).val()&&(n=$(this).val());var r=o*n;$(".replaceBookingGuest_"+t).html(n),$(".replaceBookingDeposit_"+t).html(a.format(r)),e()}),$(".jsBookCalBeds").change(function(){var t=$(this).parent().parent().data("cartid"),n=0,o=0,r=$(".amountBookingDays_"+t).data("amountbookingdays");""!==$(this).val()&&(n=$(this).val()),""!==$(this).closest("div").next("div").find("select").val()&&(o=$(this).closest("div").next("div").find("select").val());var i=parseInt(n)+parseInt(o),s=i*r;$(".replaceBookingGuest_"+t).html(i),$(".replaceBookingDeposit_"+t).html(a.format(s)),e()}),$(".jsBookCalDormitory").change(function(){var t=$(this).parent().parent().data("cartid"),n=0,o=0,r=$(".amountBookingDays_"+t).data("amountbookingdays");""!==$(this).val()&&(n=$(this).val()),""!==$(this).closest("div").prev("div").find("select").val()&&(o=$(this).closest("div").prev("div").find("select").val());var i=parseInt(n)+parseInt(o),s=i*r;$(".replaceBookingGuest_"+t).html(i),$(".replaceBookingDeposit_"+t).html(a.format(s)),e()})}),$(function(){function e(e){var a={tax_one:window.environment.service_tax_one,tax_two:window.environment.service_tax_two,tax_three:window.environment.service_tax_three},n="";e<=30&&(n=a.tax_one),e>30&&e<=100&&(n=a.tax_two),e>100&&(n=a.tax_three);var o=n/100*e,r=e+o;$(".replaceInquiryCompleteDeposit").html(t.format(e)),$(".replaceInquiryServiceFee").html(n+" %"),$(".replaceInquiryCompletePayment").html(t.format(r))}$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});$("#textarea_feedback").css("color","red"),$("#textarea_feedback").html("noch 300 Zeichen"),$("#comments").keyup(function(){var e=$("#comments").val().length,t=300-e;$("#textarea_feedback").html("noch "+t+" Zeichen")});var t=new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR",minimumFractionDigits:2});$(".jsCalSleep").change(function(){var a=$(".amountDays").data("amountdays"),n=0;""!==$(this).val()&&(n=$(this).val());var o=a*n;$(".replaceInquiryGuest").html(n),$(".replaceInquiryDeposit").html(t.format(o)),e(o)}),$(".jsCalBed").change(function(){var a=$(".amountDays").data("amountdays"),n=0,o=0;""!==$(this).val()&&(o=$(this).val()),""!==$(".jsCalDorm").val()&&(n=$(".jsCalDorm").val());var r=parseInt(o)+parseInt(n),i=(parseInt(o)+parseInt(n))*a;$(".replaceInquiryGuest").html(r),$(".replaceInquiryDeposit").html(t.format(i)),e(i)}),$(".jsCalDorm").change(function(){var a=$(".amountDays").data("amountdays"),n=0,o=0;""!==$(this).val()&&(n=$(this).val()),""!==$(".jsCalBed").val()&&(o=$(".jsCalBed").val());var r=parseInt(n)+parseInt(o),i=(parseInt(n)+parseInt(o))*a;$(".replaceInquiryGuest").html(r),$(".replaceInquiryDeposit").html(t.format(i)),e(i)})}),$(function(){function e(){return{tax_one:window.environment.service_tax_one,tax_two:window.environment.service_tax_two,tax_three:window.environment.service_tax_three,service_tax_paybybill_one:window.environment.service_tax_paybybill_one,service_tax_paybybill_two:window.environment.service_tax_paybybill_two,service_tax_paybybill_three:window.environment.service_tax_paybybill_three,service_tax_sofort_one:window.environment.service_tax_sofort_one,service_tax_sofort_two:window.environment.service_tax_sofort_two,service_tax_sofort_three:window.environment.service_tax_sofort_three,service_tax_paydirect_one:window.environment.service_tax_paydirect_one,service_tax_paydirect_two:window.environment.service_tax_paydirect_two,service_tax_paydirect_three:window.environment.service_tax_paydirect_three,service_tax_paypal_one:window.environment.service_tax_paypal_one,service_tax_paypal_two:window.environment.service_tax_paypal_two,service_tax_paypal_three:window.environment.service_tax_paypal_three,service_tax_creditcard_one:window.environment.service_tax_creditcard_one,service_tax_creditcard_two:window.environment.service_tax_creditcard_two,service_tax_creditcard_three:window.environment.service_tax_creditcard_three,redeemedAmountPayment:window.environment.redeemedAmountPayment,moneyBalancePayment:window.environment.moneyBalancePayment,serviceFeePayment:window.environment.serviceFeePayment,amountPayment:window.environment.amountPayment}}function t(t,a){a=a||"";var n=0;return"payByBill"===a?(t<=30&&(n=e().service_tax_paybybill_one),t>30&&t<=100&&(n=e().service_tax_paybybill_two),t>100&&(n=e().service_tax_paybybill_three)):"sofort"===a?(t<=30&&(n=e().service_tax_sofort_one),t>30&&t<=100&&(n=e().service_tax_sofort_two),t>100&&(n=e().service_tax_sofort_three)):"payDirect"===a?(t<=30&&(n=e().service_tax_paydirect_one),t>30&&t<=100&&(n=e().service_tax_paydirect_two),t>100&&(n=e().service_tax_paydirect_three)):"payPal"===a?(t<=30&&(n=e().service_tax_paypal_one),t>30&&t<=100&&(n=e().service_tax_paypal_two),t>100&&(n=e().service_tax_paypal_three)):"creditCard"===a?(t<=30&&(n=e().service_tax_creditcard_one),t>30&&t<=100&&(n=e().service_tax_creditcard_two),t>100&&(n=e().service_tax_creditcard_three)):(t<=30&&(n=e().tax_one),t>30&&t<=100&&(n=e().tax_two),t>100&&(n=e().tax_three)),n}$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});var a=new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR",minimumFractionDigits:2}),n=$(".sumPrepayAmount").data("sumprepayamount");$(".moneyBalanceCheckbox").click(function(){if($(this).is(":checked")){$(".afterRedeem").show();var o=$(this).parents().eq(2).data("redeem"),r=$(".sumPrepayAmount").data("sumprepayamount");if(o>=r){var i=o-r;$(".redeemAmount").html('<p class="info-listing-booking2">'+e().redeemedAmountPayment+':</p><p class="info-listing-price-booking2">'+a.format(o)+"</p>"),$(".moneyBalance").html('<p class="info-listing-booking2">'+e().moneyBalancePayment+':</p><p class="info-listing-price-booking2">'+a.format(i)+"</p>"),$(".afterRedeemAmount").html(),$(".sumPrepayServiceTotal").html(),$(".serviceFee").hide(),$(".totalPrepayAmount").hide()}else{$(".serviceFee").show();var i=r-o,s=$(".serviceFee").attr("data-paymentmethod"),d=t(i,s);n=i;var l=d/100*i,c=i+l;$(".redeemAmount").html('<p class="info-listing-booking2">'+e().redeemedAmountPayment+':</p><p class="info-listing-price-booking2">'+a.format(o)+"</p>"),$(".moneyBalance").html(),$(".afterRedeemAmount").html('<p class="info-listing-booking2">'+e().amountPayment+':</p><p class="info-listing-price-booking2">'+a.format(i)+"</p>"),$(".sumPrepayServiceTotal").html(a.format(c)),$(".serviceFee").html('<p class="info-listing-booking2">'+e().serviceFeePayment+':</p><p class="info-listing-price-booking2">'+d+" %</p>"),$(".totalPrepayAmount").show()}}else{$(".afterRedeem").hide(),$(".serviceFee").show();var m=$(".sumPrepayAmount").data("sumprepayamount"),s=$(".serviceFee").attr("data-paymentmethod"),p=t(m,s);n=m;var u=p/100*m,h=m+u;$(".sumPrepayServiceTotal").html(a.format(h)),$(".serviceFee").html('<p class="info-listing-booking2">'+e().serviceFeePayment+':</p><p class="info-listing-price-booking2">'+p+" %</p>"),$(".totalPrepayAmount").show()}}),$("input[name='payment']").on("click",function(){$(".serviceFee").attr("data-paymentmethod",$(this).val()),"creditCard"===$(this).val()?$("#creditcard").show():$("#creditcard").hide();var o=t(n,$(this).val()),r=o/100*n,i=n+r;$(".serviceFee").html('<p class="info-listing-booking2">'+e().serviceFeePayment+':</p><p class="info-listing-price-booking2">'+o+" %</p>"),$(".sumPrepayServiceTotal").html(a.format(i))})}),$(function(){function e(e){var t=e.split(/\D/g);return[t[1],t[0],t[2]].join("-")}function t(e){var t=$(".daysEditBook").data("prepaymentamount"),a=$(".daysEditBook").data("cabinprepaymentamount"),o=$(".daysEditBook").data("sleepingplace"),r=0;if(1!==o){var i=0,s=0;""!==$(".jsEditBookBed").val()&&(s=$(".jsEditBookBed").val()),""!==$(".jsEditBookDorm").val()&&(i=$(".jsEditBookDorm").val()),r=parseInt(s)+parseInt(i)}else{var d=0;""!==$(".jsEditBookSleep").val()&&(d=$(".jsEditBookSleep").val())}var l=1===o?d:r,c=a*e*l,m=c>t?c-t:c;$(".replaceEditBookingGuest").html(l),n(m,t,c)}function a(){return o={confirmDeleteBooking:window.environment.confirmDeleteBooking,deleteFailed:window.environment.deleteFailed,cancelBookingMoneyReturnConfirm:window.environment.cancelBookingMoneyReturnConfirm,cancelBookingMoneyNotReturnConfirm:window.environment.cancelBookingMoneyNotReturnConfirm}}function n(e,t,a){var n={tax_one_for_edit_booking:window.environment.service_tax_one_for_edit_booking,tax_two_for_edit_booking:window.environment.service_tax_two_for_edit_booking,tax_three_for_edit_booking:window.environment.service_tax_three_for_edit_booking},o="";e<=30&&(o=n.tax_one_for_edit_booking),e>30&&e<=100&&(o=n.tax_two_for_edit_booking),e>100&&(o=n.tax_three_for_edit_booking);var i=o/100*e,s=e+i;a>t?($(".amountGreater").show(),$(".voucherGreater").hide(),$(".replaceEditBookingCompleteDeposit").html(r.format(e)),$(".replaceEditBookingServiceFee").html(o+" %"),$(".replaceEditBookingCompletePayment").html(r.format(s))):($(".voucherGreater").show(),$(".amountGreater").hide(),$(".replaceEditBookingCompleteDeposit").html(r.format(e)),$(".replaceEditBookingToWallet").html(r.format(t-e)))}$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$("body").on("mousedown",".dateFromEditBook",function(){var a=$(this).parent().parent().data("id"),n=$("#dateFromEditBook_"+a),o=[],r=$(".holidayEditBook_"+a).data("holiday"),i=$(".greenEditBook_"+a).data("green"),s=$(".orangeEditBook_"+a).data("orange"),d=$(".redEditBook_"+a).data("red"),l=$(".notSeasonTimeEditBook_"+a).data("notseasontime"),c="";n.datepicker({showAnim:"drop",dateFormat:"dd.mm.y",changeMonth:!0,changeYear:!0,monthNames:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthNamesShort:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],dayNamesMin:["So","Mo","Di","Mi","Do","Fr","Sa"],minDate:"+1d",yearRange:"0:+2"}),n.datepicker("option","onSelect",function(o){var r=$("#dateToEditBook_"+a),i=n.datepicker("getDate"),s=n.datepicker("getDate");r.datepicker("setDate",s),i.setDate(i.getDate()+60),s.setDate(s.getDate()+1),r.datepicker("option","maxDate",i),r.datepicker("option","minDate",s);var d=new Date(e(o)),l=new Date(e(r.val())),c=Math.abs(l.getTime()-d.getTime()),m=Math.ceil(c/864e5);if(d<l){$(".daysEditBook").attr("data-days",m),$(".replaceNumberOfNights").html(m+" Tag(e)");t($(".daysEditBook").attr("data-days"))}}),n.datepicker("option","onChangeMonthYear",function(e,t,o){void 0!=e&&void 0!=t&&(c=e+"-",c+=t+"-",c+="01"),$.ajax({url:"/calendar/ajax",dataType:"JSON",type:"POST",data:{dateFrom:c,dataId:a},success:function(e){for(var t=0;t<e.holidayDates.length;t++)r.push(e.holidayDates[t]);for(var t=0;t<e.greenDates.length;t++)i.push(e.greenDates[t]);for(var t=0;t<e.orangeDates.length;t++)s.push(e.orangeDates[t]);for(var t=0;t<e.redDates.length;t++)d.push(e.redDates[t]);for(var t=0;t<e.not_season_time.length;t++)l.push(e.not_season_time[t]);n.datepicker("refresh")}})}),n.datepicker("option","beforeShowDay",function(e){var t=jQuery.datepicker.formatDate("yy-mm-dd",e);return i.indexOf(t)>=0&&(o=[!0,"greenDates","Verfügbar"]),s.indexOf(t)>=0&&(o=[!0,"orangeDates","Begrenzt"]),d.indexOf(t)>=0&&(o=[!0,"redDates","Ausgebucht"]),l.indexOf(t)>=0&&(o=[!1,"","Geschlossen"]),r.indexOf(t)>=0&&(o=[!1,"","Ruhetag"]),o}),n.datepicker("show")}),$("body").on("mousedown",".dateToEditBook",function(){var a=$(this).parent().parent().data("id"),n=$("#dateToEditBook_"+a),o=[],r=$(".holidayEditBook_"+a).data("holiday"),i=$(".greenEditBook_"+a).data("green"),s=$(".orangeEditBook_"+a).data("orange"),d=$(".redEditBook_"+a).data("red"),l=$(".notSeasonTimeEditBook_"+a).data("notseasontime"),c="";n.datepicker({showAnim:"drop",dateFormat:"dd.mm.y",changeMonth:!0,changeYear:!0,monthNames:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthNamesShort:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],dayNamesMin:["So","Mo","Di","Mi","Do","Fr","Sa"],yearRange:"0:+2"}),n.datepicker("option","onSelect",function(n){var o=$("#dateFromEditBook_"+a),r=new Date(e(o.val())),i=new Date(e(n)),s=Math.abs(i.getTime()-r.getTime()),d=Math.ceil(s/864e5);if(r<i){$(".daysEditBook").attr("data-days",d),$(".replaceNumberOfNights").html(d+" Tag(e)");t($(".daysEditBook").attr("data-days"))}}),n.datepicker("option","onChangeMonthYear",function(e,t,o){void 0!=e&&void 0!=t&&(c=e+"-",c+=t+"-",c+="01"),$.ajax({url:"/calendar/ajax",dataType:"JSON",type:"POST",data:{dateFrom:c,dataId:a},success:function(e){for(var t=0;t<e.holidayDates.length;t++)r.push(e.holidayDates[t]);for(var t=0;t<e.greenDates.length;t++)i.push(e.greenDates[t]);for(var t=0;t<e.orangeDates.length;t++)s.push(e.orangeDates[t]);for(var t=0;t<e.redDates.length;t++)d.push(e.redDates[t]);for(var t=0;t<e.not_season_time.length;t++)l.push(e.not_season_time[t]);n.datepicker("refresh")}})}),n.datepicker("option","beforeShowDay",function(e){var t=jQuery.datepicker.formatDate("yy-mm-dd",e);return i.indexOf(t)>=0&&(o=[!0,"greenDates","Verfügbar"]),s.indexOf(t)>=0&&(o=[!0,"orangeDates","Begrenzt"]),d.indexOf(t)>=0&&(o=[!0,"redDates","Ausgebucht"]),r.indexOf(t)>=0&&(o=[!0,"holidayDates","Ruhetag"]),l.indexOf(t)>=0&&(o=[!1,"","Geschlossen"]),o}),n.datepicker("show")});$("#update_book_comment").css("color","red"),$("#update_book_comment").html("noch 300 Zeichen"),$("#comments").keyup(function(){var e=$("#comments").val().length,t=300-e;$("#update_book_comment").html("noch "+t+" Zeichen")});var o="";$(".deleteCancelledBookingHistory").on("click",function(e){e.preventDefault();var t=$(this).data("del"),n=$(this).btnBootstrap("loading");!0===confirm(a().confirmDeleteBooking)?$.ajax({url:"/booking/history/delete/cancelled/booking",dataType:"JSON",type:"POST",data:{delId:t}}).done(function(e){"success"===e.status?(n.btnBootstrap("reset"),window.location.href="/booking/history/"):$(".responseMessage").html('<div class="alert alert-warning alert-dismissible response" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button><strong>OOPS! </strong>'+a().deleteFailed+"</div>")}).fail(function(){n.btnBootstrap("reset"),$(".responseMessage").html('<div class="alert alert-warning alert-dismissible response" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button><strong>OOPS! </strong>'+a().deleteFailed+"</div>")}):n.btnBootstrap("reset")}),$(".deleteWaitingPrepaymentBookingHistory").on("click",function(e){e.preventDefault();var t=$(this).data("delwaitingprepay"),n=$(this).btnBootstrap("loading");!0===confirm(a().confirmDeleteBooking)?$.ajax({url:"/booking/history/delete/waiting/prepay",dataType:"JSON",type:"POST",data:{delId:t}}).done(function(e){"success"===e.status?(n.btnBootstrap("reset"),window.location.href="/booking/history/"):$(".responseMessage").html('<div class="alert alert-warning alert-dismissible response" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button><strong>OOPS! </strong>'+a().deleteFailed+"</div>")}).fail(function(){n.btnBootstrap("reset"),$(".responseMessage").html('<div class="alert alert-warning alert-dismissible response" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button><strong>OOPS! </strong>'+a().deleteFailed+"</div>")}):n.btnBootstrap("reset")}),$(".deleteInquiryApprovedBookingHistory").on("click",function(e){e.preventDefault();var t=$(this).data("delapprovedinquiry"),n=$(this).btnBootstrap("loading");!0===confirm(a().confirmDeleteBooking)?$.ajax({url:"/booking/history/delete/approved/inquiry",dataType:"JSON",type:"POST",data:{delId:t}}).done(function(e){"success"===e.status?(n.btnBootstrap("reset"),window.location.href="/booking/history/"):$(".responseMessage").html('<div class="alert alert-warning alert-dismissible response" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button><strong>OOPS! </strong>'+a().deleteFailed+"</div>")}).fail(function(){n.btnBootstrap("reset"),$(".responseMessage").html('<div class="alert alert-warning alert-dismissible response" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button><strong>OOPS! </strong>'+a().deleteFailed+"</div>")}):n.btnBootstrap("reset")}),$(".deleteInquiryWaitingBookingHistory").on("click",function(e){e.preventDefault();var t=$(this).data("delwaitinginquiry"),n=$(this).btnBootstrap("loading");!0===confirm(a().confirmDeleteBooking)?$.ajax({url:"/booking/history/delete/waiting/inquiry",dataType:"JSON",type:"POST",data:{delId:t}}).done(function(e){"success"===e.status?(n.btnBootstrap("reset"),window.location.href="/booking/history/"):$(".responseMessage").html('<div class="alert alert-warning alert-dismissible response" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button><strong>Whoops! </strong>'+a().deleteFailed+"</div>")}).fail(function(){n.btnBootstrap("reset"),$(".responseMessage").html('<div class="alert alert-warning alert-dismissible response" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button><strong>Whoops! </strong>'+a().deleteFailed+"</div>")}):n.btnBootstrap("reset")}),$(".deleteInquiryRejectedBookingHistory").on("click",function(e){e.preventDefault();var t=$(this).data("delrejectedinquiry"),n=$(this).btnBootstrap("loading");!0===confirm(a().confirmDeleteBooking)?$.ajax({url:"/booking/history/delete/rejected/inquiry",dataType:"JSON",type:"POST",data:{delId:t}}).done(function(e){"success"===e.status?(n.btnBootstrap("reset"),window.location.href="/booking/history/"):$(".responseMessage").html('<div class="alert alert-warning alert-dismissible response" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button><strong>OOPS! </strong>'+a().deleteFailed+"</div>")}).fail(function(){n.btnBootstrap("reset"),$(".responseMessage").html('<div class="alert alert-warning alert-dismissible response" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button><strong>OOPS! </strong>'+a().deleteFailed+"</div>")}):n.btnBootstrap("reset")}),$(".cancelMoneyReturn").on("click",function(e){e.preventDefault();var t=$(this).data("cancel"),n=$(this).data("return"),o=$(this).btnBootstrap("loading"),r="";r="yes"===n?confirm(a().cancelBookingMoneyReturnConfirm):confirm(a().cancelBookingMoneyNotReturnConfirm),!0===r?$.ajax({url:"/booking/history/cancel",dataType:"JSON",type:"POST",data:{cancelId:t}}).done(function(e){"success"===e.status?(o.btnBootstrap("reset"),window.location.href="/booking/history/"):$(".responseCancelMessage_"+t).html('<div class="alert alert-warning alert-dismissible response" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button><strong>OOPS! </strong>'+a().deleteFailed+"</div>")}).fail(function(){o.btnBootstrap("reset"),$(".responseCancelMessage_"+t).html('<div class="alert alert-warning alert-dismissible response" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button><strong>OOPS! </strong>'+a().deleteFailed+"</div>")}):o.btnBootstrap("reset")});var r=new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR",minimumFractionDigits:2});$(".jsEditBookSleep").change(function(){var e=$(".daysEditBook").attr("data-days"),t=$(".daysEditBook").data("prepaymentamount"),a=$(".daysEditBook").data("cabinprepaymentamount"),o=0;""!==$(this).val()&&(o=$(this).val());var r=a*e*o,i=r>t?r-t:r;$(".replaceEditBookingGuest").html(o),n(i,t,r)}),$(".jsEditBookBed").change(function(){var e=$(".daysEditBook").attr("data-days"),t=$(".daysEditBook").data("prepaymentamount"),a=$(".daysEditBook").data("cabinprepaymentamount"),o=0,r=0;""!==$(this).val()&&(r=$(this).val()),""!==$(".jsEditBookDorm").val()&&(o=$(".jsEditBookDorm").val());var i=parseInt(r)+parseInt(o),s=a*e*i,d=s>t?s-t:s;$(".replaceEditBookingGuest").html(i),n(d,t,s)}),$(".jsEditBookDorm").change(function(){var e=$(".daysEditBook").attr("data-days"),t=$(".daysEditBook").data("prepaymentamount"),a=$(".daysEditBook").data("cabinprepaymentamount"),o=0,r=0;""!==$(this).val()&&(o=$(this).val()),""!==$(".jsEditBookBed").val()&&(r=$(".jsEditBookBed").val());var i=parseInt(o)+parseInt(r),s=a*e*i,d=s>t?s-t:s;$(".replaceEditBookingGuest").html(i),n(d,t,s)}),$(".sendChatMsg").on("click",function(e){e.preventDefault();var t=$(this).data("chatbookid"),a=$(this).btnBootstrap("loading"),n=$(".chatMessage_"+t).val();""!==t&&$.ajax({url:"/booking/history/inquiry/message/send",dataType:"JSON",type:"POST",data:{chatBookId:t,message:n}}).done(function(e){"success"===e.status&&(a.btnBootstrap("reset"),$(".hideAfterSuccess").hide(),$(".successMessage_"+t).html('<div class="alert alert-success alert-dismissible"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button> <h4><i class="icon fa fa-check"></i></h4>Die Nachricht wurde nun versendet</div>'),setInterval(function(){window.location.href="/booking/history/"},1e3))}).fail(function(e){if(a.btnBootstrap("reset"),422===e.status){var n=e.responseJSON.errors;if(n)$("#chatSendFailed_"+t).hide(),$("#errorSendFailed_"+t).show(),errorsHtml='<div class="alert alert-danger"><ul>',$.each(n,function(e,t){errorsHtml+="<li>"+t+"</li>"}),errorsHtml+="</ul></div>",$("#errorSendFailed_"+t).html(errorsHtml);else{$("#errorSendFailed_"+t).hide(),$("#chatSendFailed_"+t).show();var o=e.responseJSON;errorsHtml='<div class="alert alert-info"><ul>',$.each(o,function(e,t){errorsHtml+="<li>"+t+"</li>"}),errorsHtml+="</ul></div>",$("#chatSendFailed_"+t).html(errorsHtml)}}})})});